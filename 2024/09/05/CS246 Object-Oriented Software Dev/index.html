<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>CS 246 Notes | MACRO'S BLOG</title><meta name="author" content="Zhenghong Chen"><meta name="copyright" content="Zhenghong Chen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="CS246 Object-Oriented Software DevOOP from three perspectives:  Programmer’s perspective - How to structure programs correctly, how to lower the risk of bugs. Compiler’s perspective - What do our cons">
<meta property="og:type" content="article">
<meta property="og:title" content="CS 246 Notes">
<meta property="og:url" content="http://example.com/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/index.html">
<meta property="og:site_name" content="MACRO&#39;S BLOG">
<meta property="og:description" content="CS246 Object-Oriented Software DevOOP from three perspectives:  Programmer’s perspective - How to structure programs correctly, how to lower the risk of bugs. Compiler’s perspective - What do our cons">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://miro.medium.com/v2/resize:fit:1400/1*GRljCZx9fe_t_4vL_1imAQ.png">
<meta property="article:published_time" content="2024-09-05T04:00:00.000Z">
<meta property="article:modified_time" content="2024-09-26T19:51:18.165Z">
<meta property="article:author" content="Zhenghong Chen">
<meta property="article:tag" content="Course Notes">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://miro.medium.com/v2/resize:fit:1400/1*GRljCZx9fe_t_4vL_1imAQ.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"簡","msgToSimplifiedChinese":"繁"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'CS 246 Notes',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-26 15:51:18'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/readPercent.css"><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><script>window.paceOptions = {
  restartOnPushState: false
}

document.addEventListener('pjax:send', () => {
  Pace.restart()
})
</script><link rel="stylesheet" href="/css/progress_bar.css"/><script src="https://cdn.jsdelivr.net/npm/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/goodPictures/suitNtie.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> Menu</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-dangan"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-kafei"></i><span> Leisure</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw iconfont icon-yinle"></i><span> Music</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw iconfont icon-dianying"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-charulianjie"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-geren"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://miro.medium.com/v2/resize:fit:1400/1*GRljCZx9fe_t_4vL_1imAQ.png')"><nav id="nav"><span id="blog-info"><a href="/" title="MACRO'S BLOG"><span class="site-name">MACRO'S BLOG</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw iconfont icon-shouye"></i><span> Menu</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw iconfont icon-dangan"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw iconfont icon-biaoqian"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw iconfont icon-fenlei"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw iconfont icon-kafei"></i><span> Leisure</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw iconfont icon-yinle"></i><span> Music</span></a></li><li><a class="site-page child" href="/movie/"><i class="fa-fw iconfont icon-dianying"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw iconfont icon-charulianjie"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw iconfont icon-geren"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">CS 246 Notes</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">Created</span><time datetime="2024-09-05T04:00:00.000Z" title="Created 2024-09-05 00:00:00">2024-09-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/School/">School</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">7.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>46min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="CS 246 Notes"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="CS246-Object-Oriented-Software-Dev"><a href="#CS246-Object-Oriented-Software-Dev" class="headerlink" title="CS246 Object-Oriented Software Dev"></a>CS246 Object-Oriented Software Dev</h1><p>OOP from three perspectives:</p>
<ol>
<li><strong>Programmer’s perspective</strong> - How to structure programs correctly, how to lower the risk of bugs.</li>
<li><strong>Compiler’s perspective</strong> - What do our constructors actually means, and what must the compiler do to support them.</li>
<li><strong>Designer’s perspective</strong> - How to use OOP tools (encapsulation, inheritance, polymorphism, etc.) to build systems.</li>
</ol>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a><u>Introduction</u></h2><h4 id="Comparison-between-C-and-C"><a href="#Comparison-between-C-and-C" class="headerlink" title="Comparison between C and C++:"></a>Comparison between C and C++:</h4><p>C:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Hello World\n&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>C++:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &lt;iostream&gt;;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;Hello World&quot;</span> &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<ul>
<li><p>import, like <code>#include</code>, brings <u>names</u> and <u>definitions</u> from other files, libraries, or module into our code.</p>
<ul>
<li><p><code>import</code>, was C++’s new <u>module system</u>, more about modules in future lectures.</p>
</li>
<li><p><code>#include &lt;iostream&gt;</code> works. However module system is preferred in CS 246.</p>
</li>
</ul>
</li>
<li><p>function <code>main()</code> must return int, <code>void main() &#123;...&#125;</code> is not legal in C++</p>
</li>
<li><p>return statement returns a <u>status code</u> to OS</p>
<ul>
<li>can be omitted from main-default to <code>return 0;</code></li>
</ul>
</li>
<li><p><code>cout</code> and <code>&lt;&lt;</code> are how you write to stdout.</p>
<ul>
<li>this is the preferred way to do <strong>I&#x2F;O</strong> in C++</li>
<li>stdio.h and printf are still available in C++</li>
</ul>
</li>
<li><p><code>using namespace std</code></p>
<ul>
<li>called a <u>using directive</u></li>
<li>C++ organizes names into namespaces</li>
<li>without <code>using namespace std</code>, you need to write <ul>
<li><code>std::cout &lt;&lt; &quot;Hello World&quot; &lt;&lt; std::endl</code></li>
</ul>
</li>
</ul>
</li>
<li><p>most C programs work in C++ (or minimal changes is required)</p>
</li>
</ul>
<h4 id="Input-x2F-Output"><a href="#Input-x2F-Output" class="headerlink" title="Input&#x2F;Output"></a><strong>Input&#x2F;Output</strong></h4><p>Basic Info</p>
<p>​	C++ comes with 3 built-in I&#x2F;O streams:</p>
<p>​		<code>cout</code> - for writing to <code>stdout</code></p>
<p>​		<code>cerr</code> - for writing to <code>stderr</code></p>
<p>​		<code>cin</code> - for reading from <code>stdin</code></p>
<p>​	Built-in Operators:</p>
<p>​		<code>&lt;&lt;</code> “put to”, insertion operator (output)</p>
<p>​		<code>&gt;&gt;</code> “get from”, extraction operator (input)</p>
<p><code>&lt;&lt;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; ____ &lt;&lt; ____ &lt;&lt; ____ &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<p>[^]: dates, expressions, literals<br>[^]: <code>endl</code> outputs an end of line char, and flushes the output buffer.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; X	<span class="comment">// Operator &quot;point&quot; in the direction of data flow</span></span><br><span class="line">cerr &lt;&lt; X		<span class="comment">// Never buffered</span></span><br><span class="line"> cin &gt;&gt; X	<span class="comment">// Extract a value from stdin and put it into X.</span></span><br></pre></td></tr></table></figure>

<p>Example: Read 2 ints and print their sum</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &lt;iostream&gt;;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> x, y;</span><br><span class="line">    cin &gt;&gt; x &gt;&gt; y;</span><br><span class="line">    cout &lt;&lt; x + y &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<ul>
<li>The <code>&gt;&gt;</code> operator tries to interpret the input data, according to the type of variable being read into.<ul>
<li>In this case, <strong>x</strong> is an <strong>int</strong>, so <strong>&gt;&gt;</strong> will expect to read chars that look like an int: <u>“123”</u> or <u>“-42”</u> and assemble those chars into an int <u>value</u>.</li>
</ul>
</li>
<li>it’ll stop reading when it sees a character that is not part of an integer (letter or space)</li>
<li><code>cin &gt;&gt;</code> ignores leading whitespaces (spaces, tabs, newlines)</li>
<li>when reading from the keyboard, the program will pause waiting for the user input.</li>
<li>pressing <u>Enter</u> causes the entered text to be submitted to the program</li>
<li>pressing <u>^D</u> signals end of file, or end of input</li>
</ul>
<p><u>What if bad things happen?</u></p>
<ul>
<li><p>input doesn’t contain an int</p>
</li>
<li><p>input is too large to fit in the variable</p>
</li>
<li><p>input is exhausted (not enough data) and get 2 ints</p>
</li>
</ul>
<p><u>The input operation fails, how can we test for this in our program?</u></p>
<ul>
<li><p>if read failed (for whatever reasons): <code>cin.fail()</code> will return true</p>
</li>
<li><p>if EOF: <code>cin.eof()</code> will also return true</p>
</li>
<li><p>But not until attempted read fails</p>
</li>
</ul>
<p>Example: read all int from <code>stdin</code>, echo to <code>stdout</code>, one per line, stop at EOF or bad input.</p>
<p>Example 1:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        cin &gt;&gt; i;</span><br><span class="line">        <span class="keyword">if</span> (cin.<span class="built_in">fail</span>()) <span class="keyword">break</span>; <span class="comment">// Check for failure</span></span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Example 2:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        cin &gt;&gt; i;</span><br><span class="line">        <span class="keyword">if</span> (!cin) <span class="keyword">break</span>; <span class="comment">// cin variable is being implicitly converted to a boolean value</span></span><br><span class="line">        cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>cin</code> converts to:</p>
<ul>
<li><code>true</code> if all good</li>
<li><code>false</code> if the stream has had a read failure</li>
<li><code>&gt;&gt;</code> means right bit shift operator in C&#x2F;C++</li>
<li>a, b are int, a <code>&gt;&gt;</code> b a’s bits to the right for b spots.<ul>
<li>21 &#x3D; 10101</li>
<li>21 &gt;&gt; 3 &#x3D; 10<del>101</del> &#x3D; 10 &#x3D; 2</li>
</ul>
</li>
</ul>
<p><strong>Question</strong>: How do the program knows whether <code>&gt;&gt;</code> is <u>shifting bits</u> or <u>get from operator</u>?</p>
<p><strong>Answer</strong>: They depends on the provided arguments!</p>
<ul>
<li>when LHS is from <code>&lt;iostream&gt;</code> (<code>cin</code>), <code>&gt;&gt;</code> is “get from”</li>
<li>when LHS is int, <code>&gt;&gt;</code> is “shifting bits”</li>
<li>this is the very first example of function overloading:<ul>
<li>same function&#x2F;operator has multiple, different implementations &amp; meanings.<ul>
<li>the compiler choose wisely based on the provided <strong>number</strong> and <strong>type</strong> of the arguments, which are done at compile time.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><code>&gt;&gt;</code></p>
<p><code>cin &gt;&gt; i;</code></p>
<p>Let’s take a closer look at the <code>&gt;&gt;</code> operator:</p>
<ul>
<li>The <code>&gt;&gt;</code> operator has 2 operands:<ul>
<li><code>cin</code>, which is a stream</li>
<li><code>i</code>, a variable to receive the input data.</li>
</ul>
</li>
<li>And it returns on result:<ul>
<li><code>cin</code>, the same stream used as the first operand</li>
<li>it also has a <u>side effect</u></li>
</ul>
</li>
</ul>
<p>The fact that <u>it returns a stream (<code>cin</code>)</u>, is why we can chain a series of these together</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> cin &gt;&gt; x &gt;&gt; y &gt;&gt; z</span><br><span class="line">[cin &gt;&gt; x] -&gt; cin</span><br><span class="line">    = cin &gt;&gt; y &gt;&gt; z</span><br><span class="line">    [cin &gt;&gt; y] -&gt; cin</span><br><span class="line">    	 = cin &gt;&gt; z</span><br></pre></td></tr></table></figure>



<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// READ Example v3:</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!(cin &gt;&gt; i)) <span class="keyword">break</span>; <span class="comment">// Reading into i and checking for failure</span></span><br><span class="line">		cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// READ Example v4:</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">while</span>(cin &gt;&gt; i) &#123; <span class="comment">// if we cannot get anymore input, then cin &gt;&gt; i is false</span></span><br><span class="line">		cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Read all ints from stdin, echo them to stdout until EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// V1</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">		cin &gt;&gt; i;</span><br><span class="line">		<span class="keyword">if</span> (cin.<span class="built_in">eof</span>()) &#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (cin.<span class="built_in">fail</span>()) &#123; <span class="comment">// 1. Proper - print 2. EOF - break 3. Bad input - skip</span></span><br><span class="line">			cin.<span class="built_in">clear</span>();  <span class="comment">// Reset the stream&#x27;s failure flag, the stream will not function after failure until you do this.</span></span><br><span class="line">			cin.<span class="built_in">ignore</span>(); <span class="comment">// Removes the offending character from the stream.</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// V2</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123; <span class="comment">// 1. Proper - print 2. EOF - break 3. Bad input - skip</span></span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (cin &gt;&gt; i) &#123;</span><br><span class="line">            cout &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">            cout &lt;&lt; hex &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">            cout &lt;&lt; dec &lt;&lt; i &lt;&lt; endl;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (cin.<span class="built_in">eof</span>()) <span class="keyword">break</span>; <span class="comment">// Done - EOF</span></span><br><span class="line">        </span><br><span class="line">        cin.<span class="built_in">clear</span>();</span><br><span class="line">        cin.<span class="built_in">ignore</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<ul>
<li><code>clear()</code> must come before <code>ignore()</code>, called<code>ignore()</code> on a failed stream does nothing.</li>
<li><code>ignore()</code> removes 1 char from the stream.</li>
<li><code>ignore(count)</code> removes count chars from stream</li>
<li><code>ignore(count, &#39;\n&#39;)</code> removes count chars <u>or</u> everything up to and including the newline char, whatever comes first.</li>
</ul>
<p><u>Formatted Output</u></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; <span class="number">95</span> &lt;&lt; endl; <span class="comment">// Prints &quot;95&quot;</span></span><br><span class="line">cout &lt;&lt; hex &lt;&lt; <span class="number">95</span> &lt;&lt; endl; <span class="comment">// Prints 5F (95 in hexadecimal)</span></span><br></pre></td></tr></table></figure>

<p><code>hex</code>: I&#x2F;O manipulator - puts the stream into “hex mode” all subsequent integers are printed in hex.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; dec; <span class="comment">// switches the stream back to decimal mode.</span></span><br></pre></td></tr></table></figure>



<p>Example: print a dollar amount with leading asterisks in a width of 10 characters</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> m = <span class="number">10.9</span>;</span><br><span class="line">	<span class="comment">// cout &lt;&lt; setprecision(2) &lt;&lt; 10.912345678 &lt;&lt; endl; Output: 11</span></span><br><span class="line">cout &lt;&lt; <span class="built_in">setw</span>(<span class="number">10</span>) &lt;&lt; <span class="built_in">setfill</span>(<span class="string">&#x27;*&#x27;</span>) &lt;&lt; right &lt;&lt; fixed &lt;&lt; <span class="built_in">setprecision</span>(<span class="number">2</span>) &lt;&lt; m &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output: *****10.90</span></span><br></pre></td></tr></table></figure>

<p>Note: Use import <code>&lt;iomanip&gt;;</code></p>
<ul>
<li>Manipulators set flags in the stream. These are effectively global variables. Changes you make affect the program from that point on.</li>
<li>Changes to the stream only lives to the end of the program. i.e. Once restart the program, stream is renewed.</li>
</ul>
<hr>
<h2 id="C-Features"><a href="#C-Features" class="headerlink" title="C++ Features"></a><u>C++ Features</u></h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><p>C strings: An array of <code>char</code> (<code>char *</code> or <code>char[]</code>) terminated by a <code>null char</code> (\0)</p>
<ul>
<li>must explicitly manage memory - allocate more memory as strings get bigger</li>
<li>easy to overwrite the \0 at the end.</li>
<li>one of the biggest sources of security vulnerabilities</li>
</ul>
<p>C++ strings: GOOD NEWS, built-in string data type.</p>
<ul>
<li>intuitive, easy-to-use</li>
<li>string grow as needed (no need to manage memory explicitly)</li>
<li>safer to manipulate.</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">string s1 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">string s2 = <span class="string">&quot;World&quot;</span>;</span><br><span class="line">string s3 = s1 + <span class="string">&quot; &quot;</span> + s2;</span><br></pre></td></tr></table></figure>

<p>Note: C++ Strings are created from C string on initialization.</p>
<p>String operations:</p>
<ul>
<li>equality&#x2F;inequality: &#x3D;&#x3D;, !&#x3D;		<code>s1 == s2</code> | <code>s1 != s2</code></li>
<li>comparisons: <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, etc. (lexicographic by default)</li>
<li>length: <code>s.length()</code>. →  O(1) time. “String structure stores each string’s length”</li>
<li>concat: <code>s3 = s1 + s2;</code> <code>s3 += s1;</code> ← s3 need to be pre-defined.</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">string s1 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">string s2 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (s1 == s2) cout &lt;&lt; <span class="string">&quot;same&quot;</span> &lt;&lt; endl; <span class="comment">// comparing strings NOT memory addresses</span></span><br><span class="line"><span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;not same&quot;</span> &lt;&lt; endl;</span><br></pre></td></tr></table></figure>

<ul>
<li>individual chars:<ul>
<li><code>s[0]</code> - returns first char</li>
<li><code>s[1]</code> - returns second char</li>
</ul>
</li>
<li>mutable<ul>
<li><code>s[0] = &#39;h&#39;;</code></li>
</ul>
</li>
</ul>
<p>Example: Read Strings</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line">cin &gt;&gt; s; <span class="comment">// Skip leading whitespace, start reading, then stop at consequent whitespace.</span></span><br></pre></td></tr></table></figure>

<p>What if we want the whitespace?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">string s;</span><br><span class="line"><span class="built_in">getline</span>(cin, s); <span class="comment">// getline(stream, string variable name)</span></span><br><span class="line">				 <span class="comment">// Reads from current position up to next \n into s. (Excluding \n)</span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> c;</span><br><span class="line">cin.<span class="built_in">get</span>(c);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(cin.<span class="built_in">get</span>(c)) &#123;</span><br><span class="line">    cout &lt;&lt; c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Streams are an <u>abstraction</u>. “<em>They wrap an interface of “getting &amp; putting items” around the keyboard &amp; screen.</em>“</p>
<p>Are there other kinds of “<u>things</u>“ that could support the “<u>getting and putting</u>“ interface?</p>
<hr>
<h3 id="File-Stream-x2F-1"><a href="#File-Stream-x2F-1" class="headerlink" title="File Stream&#x2F;1"></a>File Stream&#x2F;1</h3><ul>
<li>read and write a file instead of stdin&#x2F;stdout.<ul>
<li><code>std::ifstream</code> - a file stream for reading</li>
<li><code>std::ofstream</code> - a file stream for writing</li>
<li>must import <code>&lt;fstream&gt;;</code></li>
</ul>
</li>
</ul>
<p>File access in C:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    FILE *f = fopen(<span class="string">&quot;file.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="type">char</span> s[<span class="number">256</span>];</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">fscanf</span>(f, <span class="string">&quot;%255s&quot;</span>, s);</span><br><span class="line">        <span class="keyword">if</span> (feof(f)) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>, s);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(f);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>File access in C++:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &lt;iostream&gt;;</span><br><span class="line"><span class="keyword">import</span> &lt;fstream&gt;;</span><br><span class="line"><span class="keyword">import</span> &lt;string&gt;; <span class="comment">// import and compile string lastly!</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string s;</span><br><span class="line">    ifstream f &#123;<span class="string">&quot;file.txt&quot;</span>&#125;; <span class="comment">// Declares and initializes the istream variable f. And opens the file.</span></span><br><span class="line">    <span class="keyword">while</span> (f &gt;&gt; s) &#123;</span><br><span class="line">        cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// File is closed automatically when the f variable goes out of scope: End of main().</span></span><br></pre></td></tr></table></figure>

<p>Note:</p>
<ul>
<li>Anything you can do with <code>cin</code>&#x2F;<code>cout</code>, you can do with an <code>ifstream</code>&#x2F;<code>ofstream</code>.</li>
</ul>
<h3 id="String-x2F-2"><a href="#String-x2F-2" class="headerlink" title="String&#x2F;2"></a>String&#x2F;2</h3><ul>
<li><code>import &lt;string&gt;;</code></li>
<li>Extract data from chars in a string: <code>std::istringstream</code>.</li>
<li>Send data to a string as chars: <code>std::ostringstream</code>.</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &lt;sstream&gt;;</span><br><span class="line"><span class="keyword">import</span> &lt;string&gt;;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// E.g. -&gt; convert int to string</span></span><br><span class="line"><span class="function">string <span class="title">intToString</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">    ostringstream sock; <span class="comment">// stream that writes to a string</span></span><br><span class="line">    sock &lt;&lt; n;</span><br><span class="line">    <span class="keyword">return</span> sock.<span class="built_in">str</span>(); <span class="comment">//extract the string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    string s = <span class="built_in">intToString</span>(<span class="number">5</span>);</span><br><span class="line">    cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// E.g. -&gt; convert string to number</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Enter a number&quot;</span> &lt;&lt; endl;</span><br><span class="line">        string s;</span><br><span class="line">        cin &gt;&gt; s; <span class="comment">// Input the string</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (istringstream sock&#123;s&#125;; sock &gt;&gt; n) <span class="keyword">break</span>;</span><br><span class="line">        </span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;I said, &quot;</span>; <span class="comment">// keep asking for new num until provided.</span></span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;You entered &quot;</span> &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Compare the two implementations:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Earlier Version</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>) &#123; <span class="comment">// if false, then something bad happened -&gt; EOF, bad input</span></span><br><span class="line">		<span class="keyword">if</span> (! (cin &gt;&gt; i)) &#123;</span><br><span class="line">			<span class="keyword">if</span> (cin.<span class="built_in">EOF</span>()) <span class="keyword">break</span>;</span><br><span class="line">			cin.<span class="built_in">clear</span>(); <span class="comment">// resets stream (must be cleared before another read)</span></span><br><span class="line">			cin.<span class="built_in">ignore</span>(); <span class="comment">// removes offensive character from the stream</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			cout &lt;&lt; i &lt;&lt; endl; <span class="comment">// will be default printed as a decimal</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// E.g. -&gt; Echo all numbers, skip all non-numbers</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; s) &#123; <span class="comment">// Only fail when EOF</span></span><br><span class="line">    <span class="comment">// ignores whitespace, read until the largest input</span></span><br><span class="line">	<span class="comment">// read as a string</span></span><br><span class="line">	<span class="comment">// read until hit whitespace or EOF</span></span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">if</span> (istringstream sock&#123;s&#125;; sock &gt;&gt; n) &#123;</span><br><span class="line">		<span class="comment">// convert s into input string stream, then convert to int</span></span><br><span class="line">        <span class="comment">// local scope, every new iteration will clear off fail flags</span></span><br><span class="line">            cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">// Else just continue the loop</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ex. 3.1415 is all read in cin, then we use it as an istringstream, but then </span></span><br><span class="line"><span class="comment">// we only print out 3 because the . after that isn&#x27;t an int so it stops</span></span><br><span class="line"></span><br><span class="line">abc123</span><br><span class="line">EX<span class="number">.1</span> -&gt; <span class="number">123</span>          EX<span class="number">.2</span> -&gt;</span><br><span class="line"></span><br><span class="line"><span class="number">3.1415</span></span><br><span class="line">EX<span class="number">.1</span> -&gt;              EX<span class="number">.2</span> -&gt; <span class="number">3</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">1415</span>            </span><br><span class="line"></span><br><span class="line"><span class="number">123</span>abc</span><br><span class="line">EX<span class="number">.1</span> -&gt; <span class="number">123</span>          EX<span class="number">.2</span> -&gt; <span class="number">123</span></span><br></pre></td></tr></table></figure>

<h3 id="Command-Line-Arguments"><a href="#Command-Line-Arguments" class="headerlink" title="Command Line Arguments"></a>Command Line Arguments</h3><p>To accept command line arguments in C or C++, always give main the following parameters:</p>
<p><code>int main(int argc, char *argv[]) &#123;...&#125;</code> where:</p>
<ul>
<li><code>int argc</code> stands for # of CMD Line Args<ul>
<li><code>argc</code> &gt;&#x3D; 1, where first value is the program name itself.</li>
</ul>
</li>
<li><code>char *argv[]</code> is an array of C-style strings<ul>
<li><code>argv[0]</code> &#x3D; program name</li>
<li><code>argv[1]</code> &#x3D; first arg</li>
<li><code>argv[2]</code> &#x3D; second arg</li>
<li>…</li>
<li><code>argv[argc]</code> &#x3D; NULL TERMINATOR</li>
</ul>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example: ./myprog abc 123</span></span><br><span class="line"><span class="comment">// The program name is not a command line arguments, hence argc = 3 but 2 CLA</span></span><br><span class="line"></span><br><span class="line">argv = <span class="number">0</span> [] -&gt; <span class="string">&quot;. / m y p r o g \0&quot;</span></span><br><span class="line">       <span class="number">1</span> [] -&gt; <span class="string">&quot;a b c \0&quot;</span></span><br><span class="line">       <span class="number">2</span> [] -&gt; <span class="string">&quot;1 2 3 \0&quot;</span></span><br><span class="line">       <span class="number">3</span> [] -&gt; <span class="string">&quot;\0&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">// Recommendation: Convert to C++ style strings before processing</span></span><br><span class="line">    </span><br><span class="line"><span class="type">int</span> <span class="built_in">main</span>(<span class="type">int</span> argc, <span class="type">char</span> *argv[]) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; argc; i++) &#123;</span><br><span class="line">		string arg = argv[i];</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// E.g. Print the sum of all numeric args on the cmd line.</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span> </span>&#123;</span><br><span class="line">	<span class="type">int</span> sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt; argc; i++) &#123;</span><br><span class="line">        string arg = argv[i];</span><br><span class="line">        <span class="type">int</span> n;</span><br><span class="line">        <span class="keyword">if</span> (istringstream sock&#123;args&#125;; sock &gt;&gt; n) sum += n;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; n &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// E.g. ./myprog &lt; input.txt</span></span><br><span class="line"><span class="comment">// redirection of data -&gt; treating it as it is input from the keyboard so 0</span></span><br><span class="line"><span class="comment">// command line arguments</span></span><br><span class="line"><span class="comment">// same as running ./myprog and typing it input -&gt; 0 command line arguments as</span></span><br><span class="line"><span class="comment">// well since program name isn&#x27;t a command line argument but argc = 1</span></span><br></pre></td></tr></table></figure>



<h3 id="Default-Function-Parameters"><a href="#Default-Function-Parameters" class="headerlink" title="Default Function Parameters"></a>Default Function Parameters</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">printFile</span><span class="params">(string name = <span class="string">&quot;file.txt&quot;</span>)</span> </span>&#123;</span><br><span class="line">    ifstream f &#123;name&#125;;</span><br><span class="line">    <span class="keyword">for</span> (string s; f &gt;&gt; s;) cout &lt;&lt; s &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printFile</span>();					<span class="comment">// Print &quot;file.txt&quot;</span></span><br><span class="line">    <span class="built_in">printFile</span>(<span class="string">&quot;othername.txt&quot;</span>);		<span class="comment">// Print &quot;othename.txt&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note about behavior:</p>
<ul>
<li>optional parameters must be <u>last</u></li>
<li><code>int f(int n = 2, int y = 3, int z = 4) &#123; &#125;</code><ul>
<li><code>f(0)</code> → <code>f(0, 3, 4)</code></li>
<li><code>f(1, 2)</code> → <code>f(1, 2, 4)</code></li>
<li><code>f()</code> → <code>f(2, 3, 4)</code></li>
</ul>
</li>
</ul>
<p><u>Also note</u>: the missing parameter is supplied by the <u>caller</u>, not the <u>function</u>.</p>
<p><u>WHY</u>: </p>
<ul>
<li><p>The caller passes params by pushing them onto the stack.</p>
</li>
<li><p>The function fetches params by reading them from the stack from where they are expected to be.</p>
<ul>
<li>If an argument is missing, the function has no ways of knowing that.</li>
<li><u><strong>It would interpret whatever is in that part of the stack as the <code>arg</code>.</strong></u></li>
</ul>
</li>
<li><p>So instead, the <u><strong>caller</strong></u> must supply the extra param if it is missing.</p>
</li>
<li><p>Therefore, when writing <code>printFile();</code></p>
<ul>
<li><p>The compiler replaces this with <code>printFile(&quot;file.txt&quot;);</code></p>
<ul>
<li>Compiler do the duty for us, Function is duty-less.</li>
</ul>
</li>
<li><p><code>printFile();</code> → <code>printFile(&quot;file.txt&quot;);</code> → stack frame</p>
<p> write code          		compile				run time</p>
</li>
</ul>
</li>
<li><p>For this reason, default arguments are part of a function’s <u>interface</u>, rather than its implementation.</p>
</li>
<li><p>If you are doing <u>separate compile</u>, defaults go in the <u>interface</u> file, not the <u>implementation</u> file.</p>
</li>
</ul>
<h3 id="Overloading"><a href="#Overloading" class="headerlink" title="Overloading"></a>Overloading</h3><p>In C:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">negInt</span><span class="params">(<span class="type">int</span> n)</span> &#123;<span class="keyword">return</span> -n;&#125;</span><br><span class="line"><span class="type">bool</span> <span class="title function_">negBool</span><span class="params">(<span class="type">bool</span> t)</span> &#123;<span class="keyword">return</span> !b;&#125;</span><br></pre></td></tr></table></figure>



<p>In C++;</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">neg</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;<span class="keyword">return</span> -n;&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">neg</span><span class="params">(<span class="type">bool</span> b)</span> </span>&#123;<span class="keyword">return</span> !b;&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>The idea of having same function name for different implementations is called <u><strong>OVERLOADING</strong></u>.</p>
</li>
<li><p>Simplifies the code because reusing function with different # and types of parameters inside parameter lists is legit.</p>
</li>
<li><p>The <u>compiler</u> chooses the correct version of <code>neg()</code>, for each function call, at <u>compile-time</u>.</p>
<ul>
<li>Based on the # or types of the <code>args</code> in the function call.</li>
</ul>
</li>
</ul>
<p>Hence, <u><strong>OVERLOAD</strong></u> must differ in # or types of arguments</p>
<ul>
<li>Just differing return type is not enough.<ul>
<li>Example (Already seen): <code>&lt;&lt;</code>, <code>&gt;&gt;</code>, <code>+</code><ul>
<li>Their behavior depends on types of arguments.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Structs"><a href="#Structs" class="headerlink" title="Structs"></a>Structs</h3><p>In C++;</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next; <span class="comment">// No need to say struct Node *next;</span></span><br><span class="line">&#125;; <span class="comment">// Don&#x27;t forget the semicolon</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// WHY?</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">&#125; n1, n2, n3; <span class="comment">// You can initialize instances of Node after declaring the Node.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">	<span class="type">int</span> data;</span><br><span class="line">	Node next; <span class="comment">// This is wrong</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>





<h3 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">int</span> passingGrade = <span class="number">50</span>; <span class="comment">// Must be initialized</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Declare as many things <code>const</code> as you can, it help catches errors.</li>
</ul>
<p>Constant Node</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Node n &#123;<span class="number">5</span>, <span class="literal">nullptr</span>&#125;; <span class="comment">// Syntax for null ptrs in C++</span></span><br><span class="line"><span class="comment">// Don&#x27;t say NULL or 0 in C++!</span></span><br></pre></td></tr></table></figure>



<p>Interesting notes:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> n)</span></span>;  <span class="comment">// Taking int</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(<span class="type">int</span> *p)</span></span>; <span class="comment">// Taking ptr</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">f</span>(<span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure>

<p>Use the null pointer to indicate nullity.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> Node n2 = n; <span class="comment">// Immutable copy of n</span></span><br><span class="line">				   <span class="comment">// n mutable, n2 not mutable</span></span><br></pre></td></tr></table></figure>





<h3 id="Parameter-Passing"><a href="#Parameter-Passing" class="headerlink" title="Parameter Passing"></a>Parameter Passing</h3><p>Recall:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Pass a value</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inc</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123; ++n; &#125;</span><br><span class="line">	...</span><br><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">inc</span>(x);</span><br><span class="line">cout &lt;&lt; x;</span><br><span class="line"><span class="comment">// Print 5</span></span><br><span class="line"><span class="comment">// Consequence of Pass-by-Value</span></span><br><span class="line"><span class="comment">// inc gets a copy of x, mutates the copy</span></span><br><span class="line"><span class="comment">// the original is unchanged</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// A Solution would be -- As in CS136</span></span><br><span class="line"><span class="comment">// Pass a pointer</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">inc</span> <span class="params">(<span class="type">int</span> *n)</span> </span>&#123;++*n;&#125;</span><br><span class="line">...</span><br><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="built_in">inc</span>(&amp;x); <span class="comment">// x&#x27;s address, inc changes the data at that address</span></span><br><span class="line">cout &lt;&lt; x;</span><br><span class="line"><span class="comment">// Print 6</span></span><br><span class="line"><span class="comment">// Consequence of Pass-by-Reference</span></span><br><span class="line"><span class="comment">// Visible to the caller.</span></span><br></pre></td></tr></table></figure>

<p>Q: Why <code>cin&gt;&gt;x</code> and not <code>cin &gt;&gt; &amp;x</code>?</p>
<p>A: <strong>C++ has another pointer-like type - <u>references</u></strong></p>
<h4 id="References-Important"><a href="#References-Important" class="headerlink" title="References - Important"></a><u>References</u> - <strong>Important</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> y = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span> &amp;z = y; <span class="comment">// z is an lvalue reference to y</span></span><br><span class="line">			<span class="comment">// imagine z as a const ptr</span></span><br><span class="line">			<span class="comment">// similar to int *const z = &amp;y</span></span><br></pre></td></tr></table></figure>

<p>References are like const pointers with automatic dereferencing.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">z = <span class="number">12</span> (Not *z = <span class="number">12</span>) <span class="comment">// now y == 12</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p = &amp;z;</span><br></pre></td></tr></table></figure>

<p>In all cases, z behaves <u>exactly</u> like y.	z is an <u>alias</u> (another name) for y.</p>
<p><strong>Question</strong>: How can we tell when &amp; means “reference” vs. “address of”</p>
<p>[^]: Overloading, but how??</p>
<p><strong>Answer</strong>: Whenever &amp; occurs as part of type (e.g. <code>int &amp;z</code>), it always means <strong>references</strong>. When &amp; occurs in an expression (e.g. <code>inc(&amp;z)</code>), it means <strong>address of</strong> (or bitwise-and).</p>
<p>Things you can’t do with lvalue references</p>
<ul>
<li>Leave them <strong>uninitialized</strong>	e.g. <code>int &amp;z</code> - Illegal<ul>
<li>must be initialized with something that has an address (an lvalue), since refs and ptrs.<ul>
<li>x &#x3D; y<ul>
<li>y &#x3D; right value (interested in actual value)</li>
<li>x &#x3D; left value (interested in its location)<ul>
<li>Has to denote a location (Has an address)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><code>int &amp;x = 3;</code> is illegal<ul>
<li>3 doesn’t has an address</li>
</ul>
</li>
<li><code>int &amp;x = y+z;</code> is illegal<ul>
<li>y + z doesn’t has an address</li>
</ul>
</li>
<li><code>int &amp;x = y</code>; legal<ul>
<li>y has an address (lvalue)</li>
</ul>
</li>
</ul>
</li>
<li>create a <strong>pointer to a reference</strong><ul>
<li><code>int &amp;* p;</code> illegal<ul>
<li>a pointer to a reference to an int</li>
</ul>
</li>
<li><code>int *&amp; p;</code> legal<ul>
<li>a reference to a pointer to an int</li>
</ul>
</li>
</ul>
</li>
<li>create a <strong>reference to a reference</strong><ul>
<li><code>int &amp;&amp; r = ...</code> illegal<ul>
<li>perhaps simply use a reference directly to the value</li>
<li>will compile!<ul>
<li>&amp;&amp; means something different (later)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>create an <strong>array of references</strong><ul>
<li><code>int &amp;r[] = &#123;_, _, _&#125;;</code> illegal</li>
</ul>
</li>
</ul>
<p>Things that you can do</p>
<ul>
<li>Pass as <strong>function parameters</strong><ul>
<li><code>void inc(int &amp;n) &#123;++n;&#125; // No pointer deref</code><ul>
<li>const ptr to the arg (x), changes will affect x</li>
<li><code>int x = 5; inc(x); count &lt;&lt; x; // 6</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Then why does <code>cin &gt;&gt; x</code> work?	Takes x as a reference</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istream &amp;<span class="keyword">operator</span> &gt;&gt; (istream &amp;in, <span class="type">int</span> &amp;x);</span><br></pre></td></tr></table></figure>



<p><strong>Question:</strong> Why is the stream being taken &amp; returned as a ref? And what does returning by ref mean?</p>
<p><strong>Answer:</strong> Need a better understanding of the cost of parameter passing.</p>
<p>Pass-by-value, e.g. <code>int f(int n) &#123;...&#125;</code> copies the arguments.</p>
<ul>
<li>if the arguments are big, copy is <strong>expensive</strong></li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">ReallyBig</span>&#123;......&#125; <span class="comment">// Very big structure</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span> <span class="params">(ReallyBig rb)</span> </span>&#123;...&#125; <span class="comment">// this is a copy - this is slow</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">g</span> <span class="params">(ReallyBig &amp;rb)</span> </span>&#123;...&#125; <span class="comment">// this is an alias - this is fast / Could change rb in the caller</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">h</span> <span class="params">(<span class="type">const</span> ReallyBig &amp;rb)</span> </span>&#123;...&#125; <span class="comment">// alias - this is fast / Could not change rb in the caller</span></span><br></pre></td></tr></table></figure>

<p>If applicable, Pick reference over pointers</p>
<ul>
<li>Const - Can’t change where reference points to</li>
<li>References can never be null - no need to worry</li>
</ul>
<p>What if a function <u>does</u> want to make changes to <code>rb</code> locally, but does not want these changes visible to the caller? (Being fast)</p>
<p>Then the function must make a local copy of rb:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">k</span><span class="params">(<span class="type">const</span> ReallyBig &amp;rb)</span> </span>&#123;</span><br><span class="line">	ReallyBig rb2 = rb; <span class="comment">// Copy rb to rb2, still slow isn&#x27;t it</span></span><br><span class="line">    <span class="comment">// Mutate rb2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>But if you have to make a copy anyway, it’s better to just use <u>pass-by-value</u> and have the compiler make it for you - maybe it can optimize something.</p>
<p><u>Advice</u>:</p>
<ul>
<li>Prefer <u>pass-by-const-ref</u> over <u>pass-by-value</u> for  anything larger than a pointer, unless the function needs to make a copy anyway - then just use <u>pass-by-value</u>.</li>
</ul>
<p><u>Also</u>: <code>int f(int &amp;n);</code>	<code>int g(const int &amp;n);</code></p>
<ul>
<li><code>f(5);</code> illegal, can’t initialize an lvalue ref (n) to a literal value (non-lvalue)<ul>
<li><u>if n changes, can’t change the literal 5.</u></li>
</ul>
</li>
<li><code>g(5);</code> legal, since n can never be changed ↑, the <strong>compiler allows this</strong>.<ul>
<li><strong><u>HOW?</u></strong> <u>important</u> - the 5 is stored in a <u>temporary</u> location (<strong>stack</strong>)<ul>
<li>so the ref has something to point to → towards somewhere in the stack<ul>
<li>example putting const makes function more applicable</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>So, in the case of</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istream &amp;<span class="keyword">operator</span> &gt;&gt; (istream &amp;in, <span class="type">int</span> &amp;x);</span><br></pre></td></tr></table></figure>

<p>the <code>istream</code> is passed and returned by reference to save copying.</p>
<p><strong>IMPORTANT</strong>: because stream variable are <u>not allowed</u> to be copied.</p>
<h3 id="Dynamic-Memory"><a href="#Dynamic-Memory" class="headerlink" title="Dynamic Memory"></a>Dynamic Memory</h3><p>In C:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> *p = <span class="built_in">malloc</span>(# * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">...</span><br><span class="line"><span class="built_in">free</span>(p); <span class="comment">// DON&#x27;T USE THESE IN C++!</span></span><br></pre></td></tr></table></figure>



<p>In C++: <u>new&#x2F;delete</u> - type-aware, less error-prone</p>
<ul>
<li>knew the memories, doesn’t have to manually allocate</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="type">int</span> *p = <span class="keyword">new</span> <span class="type">int</span>; <span class="comment">// Creates an int object on the heap</span></span><br><span class="line">*p = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">delete</span> p; <span class="comment">// Deallocates the memory of the int. pis still a &quot;dangling pointer&quot;.</span></span><br><span class="line">p = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;...&#125;;</span><br><span class="line"><span class="comment">// Create</span></span><br><span class="line">Node *np = <span class="keyword">new</span> Node; <span class="comment">// Creates a Node object on the heap. Returns a pointer to it.</span></span><br><span class="line"><span class="comment">// Delete</span></span><br><span class="line"><span class="keyword">delete</span> np; <span class="comment">// Deallocates memory. np is dangling pointer</span></span><br><span class="line">np = <span class="literal">nullptr</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;...&#125;</span><br><span class="line">Node *np = <span class="keyword">new</span> Node; <span class="comment">// keyword new, want a Node, it gets space from type defn</span></span><br><span class="line"><span class="comment">// np is stored on the stack, the node np points to is on the heap</span></span><br><span class="line"></span><br><span class="line">stack				heap</span><br><span class="line">_____________		_____________</span><br><span class="line"></span><br><span class="line">main:</span><br><span class="line">_____________</span><br><span class="line">p: <span class="type">int</span>* ----------&gt; <span class="type">int</span>: <span class="number">10</span>    </span><br><span class="line"></span><br><span class="line">np: node* --------&gt; node: [		]</span><br><span class="line">						  [		]</span><br><span class="line">_____________		_____________</span><br><span class="line"></span><br><span class="line"><span class="comment">// later on we need to delete np;</span></span><br><span class="line"><span class="comment">// delete only deallocate the memories on the heap</span></span><br><span class="line"><span class="comment">// p and np remains on stack as dangling pointers</span></span><br></pre></td></tr></table></figure>

<p>All <u>local</u> variables and <u>function parameters</u> reside on the the stack</p>
<ul>
<li>they are deallocated automatically when they go out of the scope (<u>stack</u> is popped)<ul>
<li>if they are pointers, the memory they point to is <u>not</u> deallocated automatically (require manual delete).</li>
</ul>
</li>
<li><code>new</code> allocated memory resides on the <u>heap</u></li>
<li>remains allocated until delete is called<ul>
<li>if don’t delete all allocated memory → Memory Leak.</li>
</ul>
</li>
<li>Calling <u>delete</u> on the same pointer more than once is an error.<ul>
<li>Program will crash: SEGV</li>
</ul>
</li>
<li>Calling <u>delete</u> on a <code>nullptr</code> is harmless - safe and acceptable.</li>
<li>Never call <u>delete</u> on a stack-allocated object  → program will crash</li>
</ul>
<h3 id="Methods-of-returning-values"><a href="#Methods-of-returning-values" class="headerlink" title="Methods of returning values"></a>Methods of returning values</h3><p>Return by value:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Okay</span></span><br><span class="line"><span class="function">Node <span class="title">getmeANode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node n;				-------&gt; Stack <span class="keyword">for</span> getmeANode</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line">Node n1 = <span class="built_in">getmeANode</span>(); -------&gt; Stack <span class="keyword">for</span> calling function</span><br><span class="line"><span class="comment">// Copying</span></span><br></pre></td></tr></table></figure>

<p>Return by pointer:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BAD</span></span><br><span class="line"><span class="function">Node *<span class="title">getmeANode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node n;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> &amp;n;</span><br><span class="line">&#125;</span><br><span class="line">Node *n1 = <span class="built_in">getmeANode</span>(); <span class="comment">// BAD: We are returning a pointer to a stack-allocated data which is DEAD on return.</span></span><br></pre></td></tr></table></figure>

<p>Return by reference:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// BAD</span></span><br><span class="line"><span class="function">Node &amp;<span class="title">getmeANode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node n;</span><br><span class="line">    ...</span><br><span class="line">	<span class="keyword">return</span> n;</span><br><span class="line">&#125;</span><br><span class="line">Node &amp;n1 = <span class="built_in">getmeANode</span>(); <span class="comment">// Also BAD, returning a reference which is an alias to a DEAD data on return.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Recall example in operator &gt;&gt;</span></span><br><span class="line">istream &amp; <span class="keyword">operator</span>&gt;&gt;(istream &amp;in, <span class="type">int</span> &amp;n) &#123;</span><br><span class="line">    ...</span><br><span class="line">	<span class="keyword">return</span> in; <span class="comment">// GOOD since in is outside of function</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Return by Pointer (Fixed):</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Node *<span class="title">getmeANode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Node *np = <span class="keyword">new</span> Node; <span class="comment">// New a node onto heap</span></span><br><span class="line">    ...</span><br><span class="line">	<span class="keyword">return</span> np; <span class="comment">// return address of np</span></span><br><span class="line">&#125;</span><br><span class="line">Node *n1 = <span class="built_in">getmeANode</span>(); <span class="comment">// n1 stores a copy of address of the node on the heap</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// This version transfers ownership of that allocated memory to the caller of the function (or other function). The caller is responsible for calling delete. </span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>Why is it okay to return a reference here? </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">istream &amp;operator&gt;&gt;(istream &amp;in, int &amp;n)</span><br></pre></td></tr></table></figure>

<ul>
<li>main: <code>cin &gt;&gt; n</code></li>
<li>the argument istream &amp;in was already available to the caller of operator &gt;&gt; so returning a reference back to it is okay</li>
<li>cin and n are in main so when you return the istream, you are returning it in main, not out of scope when istream is finished</li>
</ul>
</li>
</ul>
<h3 id="Operator-Overloading"><a href="#Operator-Overloading" class="headerlink" title="Operator Overloading"></a>Operator Overloading</h3><p>Recall from earlier how the <code>&lt;&lt;</code>and <code>&gt;&gt;</code> operators were overloaded to be used for input&#x2F;output, We can actually overload any operator to have customized behavior for certain input types. Most notably, this includes user-defined types (<code>struct</code>s and <code>class</code>es).</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;return_type&gt; <span class="built_in">operator</span>&lt;op&gt;(...&lt;<span class="built_in">input</span> (s)&gt;...) &#123;</span><br><span class="line">	... <span class="comment">// Perform computation</span></span><br><span class="line">	<span class="keyword">return</span> &lt;return_value&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Let’s consider a custom structure</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Vec</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">&#125;;</span><br><span class="line">Vec <span class="keyword">operator</span>+(<span class="type">const</span> Vec &amp;v1, <span class="type">const</span> Vec &amp;v2) &#123;</span><br><span class="line">    Vec v &#123;v1.x + v2.x, v1.y + v2.y&#125;;</span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br><span class="line">Vec <span class="keyword">operator</span>*(<span class="type">const</span> Vec &amp;v, <span class="type">const</span> <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;v.x * k, v.y * k&#125;; <span class="comment">// Compiler knows we&#x27;re talking about Vec structure</span></span><br><span class="line">&#125;</span><br><span class="line">Vec <span class="keyword">operator</span>*(<span class="type">const</span> <span class="type">int</span> k, <span class="type">const</span> Vec &amp;v) &#123;</span><br><span class="line">    <span class="keyword">return</span> v * k;</span><br><span class="line">&#125; <span class="comment">// This fixes v5&#x27;s problem</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Vec v1&#123;<span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    Vec v2&#123;<span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">    Vec v3 = v1 + v2; <span class="comment">// Uses operator + function</span></span><br><span class="line">    Vec v4 = v1 * <span class="number">10</span>; <span class="comment">// Uses the operator * function</span></span><br><span class="line">    Vec v5 = <span class="number">10</span> * v1; <span class="comment">// Does not work yet!</span></span><br><span class="line">    Vec v6 = (v1 + v2) * <span class="number">5</span>; <span class="comment">// Chaining them together</span></span><br><span class="line">    Vec v7 = v1 + v2 * <span class="number">5</span> <span class="comment">// First * then -, precedence remains after overloading.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Example:</strong> Overloading <code>&gt;&gt;</code> and <code>&lt;&lt;</code> operators</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">cout &lt;&lt; v1 &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line">ostream &amp;<span class="keyword">operator</span>&lt;&lt;(ostream &amp;out, <span class="type">const</span> Vec &amp;v) &#123;</span><br><span class="line">    out &lt;&lt; <span class="string">&#x27;(&#x27;</span> &lt;&lt; v.x &lt;&lt; <span class="string">&#x27;,&#x27;</span> &lt;&lt; v.y &lt;&lt; <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">istream &amp;<span class="keyword">operator</span>&gt;&gt;(istream *in, Vec &amp;v) &#123; <span class="comment">// Can&#x27;t be a const Vec</span></span><br><span class="line">    <span class="type">char</span> p1, c, p2;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">    in &gt;&gt; p1 &gt;&gt; x &gt;&gt; c &gt;&gt; y &gt;&gt; p2;</span><br><span class="line">    <span class="comment">// Check that data is was formatted correctly</span></span><br><span class="line">    <span class="keyword">if</span> (!in.<span class="built_in">fail</span>() &amp;&amp; p1 == <span class="string">&#x27;(&#x27;</span> &amp;&amp; c == <span class="string">&#x27;,&#x27;</span> &amp;&amp; p2 == <span class="string">&#x27;)&#x27;</span>) &#123;</span><br><span class="line">        v.x = x;</span><br><span class="line">        v.y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Vec v;</span><br><span class="line">    cin &gt;&gt; v; <span class="comment">// read in Vector v</span></span><br><span class="line">    cout &lt;&lt; v; <span class="comment">// write out Vector v</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h3><p>When programming, we can split our programs into multiple modules, where each module provides both: an <strong>interface</strong> and an <strong>implementation</strong>.</p>
<ul>
<li><strong>Interface (<code>.h</code>):</strong> Declaration, Type definitions and prototypes for functions.</li>
<li><strong>Implementation (<code>.cc</code>):</strong> Full definitions for every provided function.</li>
</ul>
<p><strong>Interface File (Vec.cc):</strong> New syntax for C++20 and is NOT backward-compatible with <code>#include</code>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example Interface (Vec.cc)</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">module</span> Vec; <span class="comment">// This tells the compiler that this is the module interface file. We can only have one per module.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">struct</span> <span class="title class_">Vec</span> &#123;</span><br><span class="line">    <span class="type">int</span> x, y;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> Vec <span class="keyword">operator</span>+(<span class="type">const</span> Vec &amp;v1, <span class="type">const</span> Vec&amp;v2);</span><br><span class="line"><span class="keyword">export</span> Vec <span class="keyword">operator</span>*(<span class="type">const</span> Vec &amp;v, <span class="type">const</span> <span class="type">int</span> k);</span><br></pre></td></tr></table></figure>

<p><strong>Implementation File (<code>Vec-impl.cc</code>)</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Implementations</span></span><br><span class="line"><span class="keyword">module</span> Vec;</span><br><span class="line"></span><br><span class="line">Vec <span class="keyword">operator</span>+(<span class="type">const</span> Vec&amp; v1, <span class="type">const</span> Vec&amp; v2) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;v1.x + v2.x, v1.y + v2.y&#125;;</span><br><span class="line">&#125; </span><br><span class="line">Vec <span class="keyword">operator</span>*(<span class="type">const</span> Vec&amp; v, <span class="type">const</span> <span class="type">int</span> k) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;v.x * k, v.y * k&#125;;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><strong>Client Code (<code>main.cc</code>)</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Client</span></span><br><span class="line"><span class="keyword">import</span> Vec; <span class="comment">// Importing the module, no &lt;&gt; since this is user module not a system module.</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Vec v1&#123;<span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    Vec v2 = v1 + v1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note:</p>
<ul>
<li>Interface file starts with export module (______);</li>
<li>Implementation files starts with module (______);</li>
<li>Client files use import (______);</li>
<li>These lines must be the first line</li>
</ul>
<h3 id="Separate-Compilation"><a href="#Separate-Compilation" class="headerlink" title="Separate Compilation"></a>Separate Compilation</h3><p>Speed up compilation by only compiling what’s necessary.</p>
<p>Files are compiled in dependency order:</p>
<ol>
<li>Interface files first</li>
<li>Implementation &#x2F; Client code second</li>
</ol>
<p>Separate Compilation in dependency order:</p>
<p><code>-c</code>: Produces an Object file (<code>.o</code>); Only compiling the file without linking, neither create an executable.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">g++<span class="number">20</span> -c Vec.cc 		<span class="comment">// Creates Vec.o</span></span><br><span class="line">g++<span class="number">20</span> -c Vec-impl.cc</span><br><span class="line">g++<span class="number">20</span> -c main.cc</span><br></pre></td></tr></table></figure>

<p>The command to link all the object files and produces an executable is:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++<span class="number">20</span> Vec.o Vec-impl.o main.o -o main</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++<span class="number">20</span> Vec-impl.o main.o -o main <span class="comment">// Omitting Vec.o is Valid, compiler knows which interface file is corresponding from gcm.cache.</span></span><br></pre></td></tr></table></figure>

<p>Now the executable file can be run as</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./main</span><br></pre></td></tr></table></figure>

<p>We must compile interface files in C++ unlike in C where we only include header files (<code>.h</code>) inside the implementation files.</p>
<p>We must always compile system libraries&#x2F;modules before compiling any user-defined modules.</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://github.com/M4cr0Chen/MyPic/blob/main/img/202409241210809.jpg" alt="Module Graph"></p>
<p><code>A -&gt; B</code> means A <u>depends on</u> B. If we were compiling, we would need to compile B <u>first</u>.</p>
<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><p>Classes are the main difference between C and C++.</p>
<p>Simply speaking, a <code>class</code> is a <code>struct</code> with functions in it.</p>
<p><strong>Example:</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Student.cc</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">	<span class="type">int</span> assignments, midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">grade</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Student-impl.cc</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">Student::grade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> assignments * <span class="number">0.4</span> + midterm * <span class="number">0.2</span> + <span class="keyword">final</span> * <span class="number">0.4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student s&#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125;;</span><br><span class="line">    cout &lt; s.grade &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Implementation of a class function can be either in interface file (inside the struct) or in implementation file. Writing in implementation file is recommended.</p>
<p><code>Student</code> is a class. The functions in it gives the struct <u>behavior</u>.</p>
<p><code>s</code> is an object - a particular instance of a class.</p>
<p><code>assignments</code> <code>midterm</code> and <code>final</code> are called <u>data members</u>, or <u>member fields</u> or (<u>fields</u>), or <u>member variables</u>.</p>
<p><code>::</code> - “scope resolution operator”. Locate the context. Define a function inside a class, also provide namespace.</p>
<p><code>Student::grade</code> is a “member function” or “method”. (Meaning grade in the context of class Student)</p>
<p>The fields: assignments, midterm, and final are fields of the <u>receiver object</u> - the object upon which the grade method was called.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s1.<span class="built_in">grade</span>(); <span class="comment">// method call | uses s1&#x27;s data members.</span></span><br></pre></td></tr></table></figure>

<p>Question: What do assignments, midterm, final mean inside of Student::grade?</p>
<ul>
<li>They are fields of the receiver object - the object upon which graded was called.</li>
<li>How do we know which data in the structure’s field corresponds to which receiver object?</li>
</ul>
<p>Formally, every <u>method</u> has a hidden extra parameter called <u><code>this</code></u>, which is a <u>pointer</u> (not a reference) to the receiver object. (It is a pointer to the object that the method was called on)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// We write</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">grade</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span></span><br><span class="line">          assignments * <span class="number">0.4</span></span><br><span class="line">        + midterm * <span class="number">0.2</span></span><br><span class="line">        + <span class="keyword">final</span> * <span class="number">0.4</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; s.<span class="built_in">grade</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// Compiler re-writes as</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">grade</span><span class="params">(Student *<span class="keyword">this</span>)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> </span><br><span class="line">          <span class="keyword">this</span>-&gt;assignments * <span class="number">0.4</span></span><br><span class="line">        + <span class="keyword">this</span>-&gt;midterm * <span class="number">0.2</span></span><br><span class="line">        + <span class="keyword">this</span>-&gt;<span class="keyword">final</span> * <span class="number">0.4</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; s.<span class="built_in">grade</span>();</span><br></pre></td></tr></table></figure>

<p>Inside the function, <code>&lt;var&gt;</code> and <code>this-&gt;&lt;var&gt;</code> is the same thing, so they can be used interchangeably, when <code>&lt;var&gt;</code> is any fields inside the class&#x2F;struct.</p>
<h2 id="Big-Five"><a href="#Big-Five" class="headerlink" title="Big Five"></a><u>Big Five</u></h2><p>These are methods you may have to implement in your classes.</p>
<ol>
<li>Constructors (<code>ctor</code>)</li>
<li>Copy Constructors (<code>cctor</code>, copy <code>ctor</code>)</li>
<li>Destructors (<code>dtor</code>)</li>
<li>Copy assignment operators</li>
<li>move constructors</li>
<li>move assignment operator</li>
</ol>
<h3 id="Constructors-Initializing-Objects"><a href="#Constructors-Initializing-Objects" class="headerlink" title="Constructors (Initializing Objects)"></a>Constructors (Initializing Objects)</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student s1 &#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125;  <span class="comment">// Ok but limited</span></span><br><span class="line">Student s2 &#123;<span class="number">-100</span>, <span class="number">1000</span>&#125;; <span class="comment">// Valid, but doesn&#x27;t create a valid Student</span></span><br></pre></td></tr></table></figure>

<p>To control how objects are created, write a constructor (<u>ctor</u>). Constructors have no return type and have the same name as the class&#x2F;struct.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Student.cc</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> assns, mt, <span class="keyword">final</span>;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">grade</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> assns, <span class="type">int</span> mt, <span class="type">int</span> <span class="keyword">final</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Student-impl.cc</span></span><br><span class="line">Student::<span class="built_in">Student</span>(<span class="type">int</span> assns, <span class="type">int</span> mt, <span class="type">int</span> <span class="keyword">final</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span> -&gt; assns = assns;</span><br><span class="line">    <span class="keyword">this</span> -&gt; mt = mt;</span><br><span class="line">    <span class="keyword">this</span> -&gt; <span class="keyword">final</span> = <span class="keyword">final</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.cc</span></span><br><span class="line">Student s &#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125;; <span class="comment">// Much Better</span></span><br><span class="line">Student s = Student&#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125; <span class="comment">// Equivalent to above line</span></span><br><span class="line">Student *p = <span class="keyword">new</span> Student&#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125;; <span class="comment">// Heap initialization</span></span><br></pre></td></tr></table></figure>

<p>When there is a constructor, program passes the arguments to the constructor. When there is not, then this is C-style field-by-field initialization. C-style struct initialization is only available if you have not written a constructor.</p>
<p>The major benefits of constructors is that they are functions and can thus be customized as such:</p>
<ul>
<li>Argument bounds checking</li>
<li>Default parameters</li>
<li>Overloading</li>
<li>Sanity checks</li>
</ul>
<p>Any constructor that can be called with 0 arguments is a “default constructor”. This can be either the constructor has no arguments or because it has default parameters. If we do not write any constructors, then the compiler provides the default constructor.</p>
<p>Compiler-provided default constructor:</p>
<ul>
<li>Primitive fields(<code>bool</code>, <code>int, </code>char&#96;, pointers) - left uninitialized</li>
<li>Object fields(<code>class</code>, <code>struct</code>) - calls the object’s default constructor</li>
</ul>
<p><strong>Example:</strong> Class with default constructor</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> [</span><br><span class="line">	<span class="type">int</span> assns, mt, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">int</span> assns = <span class="number">0</span>, <span class="type">int</span> mt = <span class="number">0</span>, <span class="type">int</span> <span class="keyword">final</span> = <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span> -&gt; assns = assns; <span class="keyword">this</span> -&gt; mt = mt; <span class="keyword">this</span> -&gt; <span class="keyword">final</span> = <span class="keyword">final</span>;</span><br><span class="line">    &#125;</span><br><span class="line">] </span><br><span class="line"></span><br><span class="line">Student s2&#123;<span class="number">70</span>, <span class="number">80</span>&#125;; <span class="comment">// 70, 80, 0 &quot;final&quot; is left as 0 by the ctor</span></span><br><span class="line">Student newKid; <span class="comment">// 0, 0, 0 (0-argument ctor invoked)</span></span><br><span class="line">Student newKid&#123;&#125;; <span class="comment">// Both this and above calls ctor</span></span><br></pre></td></tr></table></figure>

<p>Whenever an object is created, a constructor is always called.</p>
<p>If we do not have a default constructor for a class, that can cause issues with any classes containing classes without default constructor. Remember this is only an issue when we provide our own custom  constructor as compiler provides a default constructor by default.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Vec</span> &#123;</span><br><span class="line">	<span class="type">int</span> x, y;</span><br><span class="line">    <span class="built_in">Vec</span>(intx, <span class="type">int</span> y) &#123;</span><br><span class="line">        <span class="keyword">this</span> -&gt; x = x;</span><br><span class="line">        <span class="keyword">this</span> -&gt; y = y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">Vec v&#123;<span class="number">1</span>, <span class="number">2</span>&#125;; <span class="comment">// OK</span></span><br><span class="line">Vec vl 		 <span class="comment">// Error!</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Basis</span> &#123;</span><br><span class="line">	Vec v1, v2; <span class="comment">// Note Vec doesn&#x27;t has a default ctor</span></span><br><span class="line">&#125;;</span><br><span class="line">Basis b;</span><br></pre></td></tr></table></figure>

<p>The built-in default <code>ctor</code> for Basis would attempt to default-construct all fields that are objects: v1 and v2 are objects. Since they have no default <code>ctor</code>, Basis cannot have a built-in default <code>ctor</code>.</p>
<p>Providing a default constructor might seem to work but it actually does not solve the issue.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Basis</span> &#123;</span><br><span class="line">    Vec v1, v2; <span class="comment">// v1 and v2 are already first constructed here</span></span><br><span class="line">    <span class="built_in">Basis</span>() &#123;</span><br><span class="line">        v1 = Vec&#123;<span class="number">1</span>, <span class="number">0</span>&#125;; <span class="comment">// Too late</span></span><br><span class="line">        v2 = Vec&#123;<span class="number">0</span>, <span class="number">1</span>&#125;; <span class="comment">// Too late</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>NOTE:</strong> Whenever we have a usable object in C++, it has been constructed at some point.</p>
<p>The body of the <code>ctor</code> can contain arbitrary code, so the <strong>fields</strong> of the class are expected to be constructed &amp; ready to use before the <code>ctor</code> body runs.</p>
<p>Steps for object creation:</p>
<ol>
<li>Enough space is allocated</li>
<li>Fields are constructed in declaration order (i.e. <code>ctor</code> run for fields that are objects)</li>
<li><code>ctor</code> body runs</li>
</ol>
<p>Initialization of v1, v2 must happen in step 2, not step 3. How to accomplish that?</p>
<p>We can fix this issue with a <strong>Member Initialization List (MIL)</strong>. The MIL provides default values to initialize the fields with in step 2 instead of using the default constructor.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student::<span class="built_in">Student</span>(<span class="type">int</span> assns, <span class="type">int</span> mt, <span class="type">int</span> <span class="keyword">final</span>):</span><br><span class="line">	assns&#123;assns&#125;, mt&#123;mt&#125;, <span class="keyword">final</span>&#123;<span class="keyword">final</span>&#125; &#123;&#125; <span class="comment">// var: fields, &#123;var&#125;: parameters</span></span><br></pre></td></tr></table></figure>

<p><strong>NOTE</strong>: We can initialize any field this way, not just object fields.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// For Basis</span></span><br><span class="line">Basis::<span class="built_in">Basis</span>(): v1&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, v2&#123;<span class="number">0</span>, <span class="number">1</span>&#125;&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>More generally:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">struc Basis&#123;</span><br><span class="line">	Vec v1, v2;</span><br><span class="line">	<span class="built_in">Basis</span>(<span class="type">const</span> Vec &amp;v1, <span class="type">const</span> Vec &amp;v2):</span><br><span class="line">		v1&#123;v1&#125;, v2&#123;v2&#125; &#123;&#125; <span class="comment">// Sth to think about: What ctor is running here?</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>NOTE:</strong> The MIL is <strong>ONLY</strong> provided in the interface file.</p>
<p>For something like the <code>Basis</code> class, we generally want 2 different constructors:</p>
<ol>
<li>Default Constructor</li>
<li>Custom Constructor (user provides all fields)</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Option 1: Providing default values in the default constructor</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Basis</span>&#123;</span><br><span class="line">    Vec v1, v2;</span><br><span class="line">    <span class="built_in">Basis</span>(): v1&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, v2&#123;<span class="number">0</span>, <span class="number">1</span>&#125; &#123;&#125;</span><br><span class="line">    <span class="built_in">Basis</span>(<span class="type">const</span> vec&amp; v1, <span class="type">const</span> vec&amp; v2): v1&#123;v1&#125;, v2&#123;v2&#125; &#123;&#125; </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// Option 2: Providing default values in the declaration</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Basis</span>&#123;</span><br><span class="line">    Vec v1&#123;<span class="number">1</span>, <span class="number">0</span>&#125;, v2&#123;<span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line">    <span class="built_in">Basis</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Basis</span>(<span class="type">const</span> vec&amp; v1, <span class="type">const</span> vec&amp; v2): v1&#123;v1&#125;, v2&#123;v2&#125; &#123;&#125; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>If there’s no MIL provided, then the default values provided during declaration are used. Fields are initialized <u>based on the order in which they were declared in the class</u>, even if the MIL order them differently. The order of the fields in the MIL doesn’t matter.</p>
<p>Using the MIL is sometimes more efficient than setting fields in the <code>ctor</code> body. Since for the constructor body, each object needs to be default constructed first before it’s overwritten is reset to the provided value. This causes extra memory write cycles. Hence it is recommended to use MIL whenever possible.</p>
<p>Consider:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> assns, mt, <span class="keyword">final</span>; <span class="comment">// not objects</span></span><br><span class="line">    string name; <span class="comment">// object</span></span><br><span class="line">    <span class="built_in">Student</span> (<span class="type">int</span> assns, <span class="type">int</span> mt, <span class="type">int</span> <span class="keyword">final</span>, string name) &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;assns = assns;</span><br><span class="line">        ...</span><br><span class="line">		<span class="keyword">this</span>-&gt;name = name; <span class="comment">// name is default constructed to an empty string in Step 2, and reassigned here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Versus MIL:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Stuent</span> &#123;</span><br><span class="line">	<span class="built_in">Student</span> (<span class="type">int</span> assns, <span class="type">int</span> mt, <span class="type">int</span> <span class="keyword">final</span>, string name): assns&#123;assns&#125;, mt&#123;mt&#125;, <span class="keyword">final</span>&#123;<span class="keyword">final</span>&#125;, name&#123;name&#125; &#123;&#125; <span class="comment">// name is initialized to the correct value in step 2. No reassignment in step 3. More efficient.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>An MIL <strong>must</strong> be used for any fields that satisfy any of these conditions:</p>
<ol>
<li>objects with no default constructor</li>
<li>const or references</li>
</ol>
<h3 id="Copy-Constructors"><a href="#Copy-Constructors" class="headerlink" title="Copy Constructors"></a>Copy Constructors</h3><p>Consider:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="type">int</span> assns, mt, <span class="keyword">final</span>;</span><br><span class="line">&#125;;</span><br><span class="line">Student s&#123;<span class="number">60</span>, <span class="number">70</span>, <span class="number">80</span>&#125;;</span><br><span class="line">Student r&#123;s&#125;;</span><br><span class="line">Student s2 = s;</span><br></pre></td></tr></table></figure>

<p>Examples shown above invoke the copy constructor that we get for free. It creates an object from another of the same type. By default, the compiler-provided constructor copies each field from the original object into the object being constructed.</p>
<p>Note: Every class comes with</p>
<ol>
<li>Constructors (default-constructs all fields that are objects)<ol>
<li>lost if you write any custom constructor</li>
</ol>
</li>
<li>Destructors (frees up memory when the object is created)</li>
<li>Copy Constructors (just copies all fields)</li>
<li>Copy assignment operators</li>
<li>move constructors</li>
<li>move assignment operator</li>
</ol>
<p><strong>Example:</strong> Copy constructor for Student class</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span>&#123;</span><br><span class="line">    <span class="type">int</span> assns, mt, <span class="keyword">final</span>;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">Student</span>(<span class="type">const</span> Student &amp;other): assns&#123;other.assns&#125;, mt&#123;other.mt&#125;, <span class="keyword">final</span>&#123;other.<span class="keyword">final</span>&#125; &#123;&#125;</span><br><span class="line">    <span class="comment">// Equivalent to built-in copy constructor</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>It is important to note that adding ANY constructor (including a copy or more constructor) will remove the compiler-provided default constructor.</p>
<p>Example: When we cannot use the compiler provided copy constructor</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">&#125;;</span><br><span class="line">Node *n = <span class="keyword">new</span> Node &#123;<span class="number">1</span>, <span class="keyword">new</span> Node&#123;<span class="number">2</span>, <span class="keyword">new</span> Node&#123;<span class="number">3</span>, <span class="literal">nullptr</span>&#125;&#125;&#125;;</span><br><span class="line">Node m = *n;</span><br><span class="line">Node *p = <span class="keyword">new</span> Node&#123;*n&#125;;</span><br><span class="line"><span class="comment">// last two are copy ctor</span></span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://macrochen.top/M4cr0Chen/MyPic@img/img/202409261507897.jpg" alt="8651ea96e2cc453472f5e65090e4c5e"></p>
<p>In this case, only the first node is actually copied. This is an example of shallow copy, where only first layer is copied over. Instead we want a deep copy, where we will end up with 3 identical but still independent lists.</p>
<p>In order to do that, we must write our own copy ctor.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">    <span class="built_in">Node</span> (<span class="type">const</span> Node &amp;other): data&#123;other,data&#125;, next&#123;other.next? <span class="keyword">new</span> Node&#123;*other.next&#125;: <span class="literal">nullptr</span>&#125; &#123;&#125;</span><br><span class="line">    <span class="comment">// Note that following is wrong</span></span><br><span class="line">    <span class="built_in">Node</span> (Node other): ... &#123;&#125;</span><br><span class="line">    <span class="comment">// Taking &#x27;other&#x27; by value implies that &#x27;other&#x27; is being copied, leading to infinite recursion.</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>The above example will perform a recursive deep copy, and when called on a linked list, will produce another that is identical but completely separate.</p>
<p>The copy constructor is called in the following situation:</p>
<ol>
<li>Constructing (initialized) one object from another of the same type</li>
<li>Object is passed by value</li>
<li>Object is returned by value</li>
</ol>
<p>The truth is more nuanced, as we will see.</p>
<h4 id="Explicit-x2F-Implicit-Constructors"><a href="#Explicit-x2F-Implicit-Constructors" class="headerlink" title="Explicit &#x2F; Implicit Constructors"></a>Explicit &#x2F; Implicit Constructors</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Example</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="built_in">Node</span> (<span class="type">int</span> data, Node *next=<span class="literal">nullptr</span>): data&#123;data&#125;, next&#123;next&#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Single argument constructors allow implicit conversions. For example with the Node class shown above, we can construct it by just providing a single integer. Thus, the following behavior make sense:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Node n&#123;<span class="number">4</span>&#125;;</span><br><span class="line">Node n = <span class="number">4</span>; <span class="comment">// Implicit conversion from int to node</span></span><br></pre></td></tr></table></figure>

<p>We have experienced this with C++ string initialization:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string s = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="comment">// A variable of type std::string is being initialized witha const char* value.</span></span><br></pre></td></tr></table></figure>

<p>This is allowed because there is a single argument constructor for std::string that tales in a const char*.</p>
<p>However, implicit conversions also allow for some unintuitive behavior:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(Node n)</span> </span>&#123;</span><br><span class="line">	<span class="comment">// Do something with n</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">f</span>(Node&#123;<span class="number">4</span>&#125;); <span class="comment">// Make sense</span></span><br><span class="line"><span class="built_in">f</span>(<span class="number">4</span>); <span class="comment">// Doesn&#x27;t make sense but works</span></span><br></pre></td></tr></table></figure>

<p>In the example shown above, the constructor for Node is called, which takes in an int. Once a Node is constructed, it is passed to f.</p>
<p>Implicit conversions can be dangerous:</p>
<ul>
<li>Accidentally passing an int to a function expecting a Node</li>
<li>silen conversion</li>
<li>compiler does not signal an error</li>
<li>potential errors not caught</li>
</ul>
<p>In order to not letting you compiler helping you, disable the implicit conversion by prefixing the constructor with the <code>explicit</code> keyword:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">	<span class="function"><span class="keyword">explicit</span> <span class="title">Node</span><span class="params">(<span class="type">int</span> data, Node *next=<span class="literal">nullptr</span>)</span>: data&#123;</span>data&#125;, next&#123;next&#125; &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Node n&#123;<span class="number">4</span>&#125;; <span class="comment">// Works</span></span><br><span class="line">Node n = <span class="number">4</span>; <span class="comment">// Won&#x27;t compile</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(Node n)</span></span>&#123;...&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">f</span>(Node&#123;<span class="number">4</span>&#125;); <span class="comment">// Works</span></span><br><span class="line"><span class="built_in">f</span>(<span class="number">4</span>); <span class="comment">// Won&#x27;t compile</span></span><br></pre></td></tr></table></figure>

<h3 id="Destructors"><a href="#Destructors" class="headerlink" title="Destructors"></a>Destructors</h3><ol>
<li>Called when a stack-allocated object is popped off the stack, or when <code>delete</code> is called on heap allocated memory.</li>
<li>A special method that runs when an object is destroyed.</li>
</ol>
<p>The default compiler-provided destructor calls the destructor on all constituent objects, and does nothing to non-objects.</p>
<p>Steps of C++ object destruction:</p>
<ol>
<li>Destructor body runs</li>
<li>Field’s destructors are invoked (destructor runs for all object fields) [In reverse declaration order]</li>
<li>space is deallocated</li>
</ol>
<p><strong>Reasons for writing custom destructors:</strong></p>
<p>Similar to with constructors, custom classes for data structures, especially those that references themselves will need a custom constructor. Let’s see why using the <code>Node</code> class as an example:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    Node *next;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Here, <code>next</code> is a <code>Node *</code> or <code>Node</code> pointer. Thus it is not an object and no destructor will run for it. When we call <code>delete</code> on a node in a linked list, only that node will be deleted, and all the subsequent nodes will remain in memory but inaccessible, causing a memory leak.</p>
<p><strong>Example:</strong> <code>Node</code> class with destructor.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    ... <span class="comment">// Fields and constructors</span></span><br><span class="line">	~<span class="built_in">Node</span>() &#123;<span class="keyword">delete</span> next;&#125; <span class="comment">// Recursively calls destructor</span></span><br><span class="line">    <span class="comment">// Name for dtor is ~&lt;name&gt;, has no args or return type</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>NOTE:</strong> The base case running <code>delete nullptr;</code> is guaranteed safe and does nothing more. Hence the recursion stops.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://example.com">Zhenghong Chen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/">http://example.com/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Course-Notes/">Course Notes</a></div><div class="post_share"><div class="social-share" data-image="https://miro.medium.com/v2/resize:fit:1400/1*GRljCZx9fe_t_4vL_1imAQ.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/01/09/CS136Notes/" title=""><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/goodPictures/c53c811f880411ebb6edd017c2d2eca2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info"></div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2023/12/14/Math135Notes/" title="Math 135 Notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-media.byjusfutureschool.com/bfs-blog/2022/09/21090501/Article-Page-86.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-14</div><div class="title">Math 135 Notes</div></div></a></div><div><a href="/2023/12/14/Math137Notes/" title="Math 137 Notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.thoughtco.com/thmb/irSi_hwriBZL3QbGsCiiNsgaSWI=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/calculus-on-blackboard-79338340-5be4695946e0fb0026d6856f.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-14</div><div class="title">Math 137 Notes</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="card-info-avatar"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/goodPictures/suitNtie.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="palm_tree" fallback-src="https://lskypro.acozycotage.net/LightPicture/2022/12/fe1dc0402e623096.jpg">🐟</g-emoji><span>认真摸鱼中</span></div></div></div><div class="author-info__name">Zhenghong Chen</div><div class="author-info__description">macrochen05@gmail.com</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/M4cr0Chen"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/M4cr0Chen" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.instagram.com/m4cr0ch4n/" target="_blank" title="Instagram"><i class="fab fa-instagram" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.facebook.com/chen.macro.75" target="_blank" title="Facebook"><i class="fab fa-facebook" style="color: #24292e;"></i></a><a class="social-icon" href="https://www.linkedin.com/in/zhenghong-chen-974102245/" target="_blank" title="Linkedin"><i class="fab fa-linkedin-in" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Welcome to Macro's blog. Macro is having a hard time studying in University of Waterloo, so if you can offer him a job he'll be better!😄</div><div id="welcome-info"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CS246-Object-Oriented-Software-Dev"><span class="toc-text">CS246 Object-Oriented Software Dev</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Comparison-between-C-and-C"><span class="toc-text">Comparison between C and C++:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Input-x2F-Output"><span class="toc-text">Input&#x2F;Output</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#C-Features"><span class="toc-text">C++ Features</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#String"><span class="toc-text">String</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#File-Stream-x2F-1"><span class="toc-text">File Stream&#x2F;1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#String-x2F-2"><span class="toc-text">String&#x2F;2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Command-Line-Arguments"><span class="toc-text">Command Line Arguments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Default-Function-Parameters"><span class="toc-text">Default Function Parameters</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Overloading"><span class="toc-text">Overloading</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Structs"><span class="toc-text">Structs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Constants"><span class="toc-text">Constants</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parameter-Passing"><span class="toc-text">Parameter Passing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#References-Important"><span class="toc-text">References - Important</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Dynamic-Memory"><span class="toc-text">Dynamic Memory</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Methods-of-returning-values"><span class="toc-text">Methods of returning values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Operator-Overloading"><span class="toc-text">Operator Overloading</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Modules"><span class="toc-text">Modules</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Separate-Compilation"><span class="toc-text">Separate Compilation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Classes"><span class="toc-text">Classes</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Big-Five"><span class="toc-text">Big Five</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Constructors-Initializing-Objects"><span class="toc-text">Constructors (Initializing Objects)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Copy-Constructors"><span class="toc-text">Copy Constructors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Explicit-x2F-Implicit-Constructors"><span class="toc-text">Explicit &#x2F; Implicit Constructors</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Destructors"><span class="toc-text">Destructors</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/" title="CS 246 Notes"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://miro.medium.com/v2/resize:fit:1400/1*GRljCZx9fe_t_4vL_1imAQ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CS 246 Notes"/></a><div class="content"><a class="title" href="/2024/09/05/CS246%20Object-Oriented%20Software%20Dev/" title="CS 246 Notes">CS 246 Notes</a><time datetime="2024-09-05T04:00:00.000Z" title="Created 2024-09-05 00:00:00">2024-09-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/09/CS136Notes/" title="No title"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/goodPictures/c53c811f880411ebb6edd017c2d2eca2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="No title"/></a><div class="content"><a class="title" href="/2024/01/09/CS136Notes/" title="No title">No title</a><time datetime="2024-01-09T16:35:47.912Z" title="Created 2024-01-09 11:35:47">2024-01-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/20/2023-12-20/" title="My PVZ Development Log"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://play-lh.googleusercontent.com/hO7716hh7NCcFauJedDclX-R3Zh9JmbSs8AUU6TP2edGVILlZM7gmyt_8WPCZELiPQA" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="My PVZ Development Log"/></a><div class="content"><a class="title" href="/2023/12/20/2023-12-20/" title="My PVZ Development Log">My PVZ Development Log</a><time datetime="2023-12-20T22:11:00.000Z" title="Created 2023-12-20 17:11:00">2023-12-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/17/2023-12-17/" title="My PVZ Development Log"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://play-lh.googleusercontent.com/hO7716hh7NCcFauJedDclX-R3Zh9JmbSs8AUU6TP2edGVILlZM7gmyt_8WPCZELiPQA" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="My PVZ Development Log"/></a><div class="content"><a class="title" href="/2023/12/17/2023-12-17/" title="My PVZ Development Log">My PVZ Development Log</a><time datetime="2023-12-17T16:15:23.000Z" title="Created 2023-12-17 11:15:23">2023-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/12/14/Math135Notes/" title="Math 135 Notes"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-media.byjusfutureschool.com/bfs-blog/2022/09/21090501/Article-Page-86.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Math 135 Notes"/></a><div class="content"><a class="title" href="/2023/12/14/Math135Notes/" title="Math 135 Notes">Math 135 Notes</a><time datetime="2023-12-14T20:46:00.000Z" title="Created 2023-12-14 15:46:00">2023-12-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">公益广告</p><div class="bg-ad"><div>国家反诈中心是国务院打击治理电信网络新型违法犯罪工作部际联席会议合成作战平台，集资源整合、情报研判、侦查指挥为一体，在打击、防范、治理电信网络诈骗等新型违法犯罪中发挥着重要作用。</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://www.macrochen.top/">点击跳转</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">修仙导航</p><ul class="ft-links"><li><a target="_blank" rel="noopener" href="https://fe32.top/articles/hexo1600/">建站指南</a><a target="_blank" rel="noopener" href="https://fe32.top/nav.html">网址导航</a></li><li><a target="_blank" rel="noopener" href="https://fe32.top/sponsorWall/">来杯咖啡</a><a target="_blank" rel="noopener" href="https://fe32.top/comments/">留点什么</a></li><li><a target="_blank" rel="noopener" href="https://www.macrochen.top/about/">关于博主</a><a target="_blank" rel="noopener" href="https://www.macrochen.top/archives/">文章归档</a></li><li><a target="_blank" rel="noopener" href="https://www.macrochen.top/categories/">文章分类</a><a target="_blank" rel="noopener" href="https://www.macrochen.top/tags/">文章标签</a></li><li><a target="_blank" rel="noopener" href="https://fe32.top/gallery/">我的相册</a><a target="_blank" rel="noopener" href="https://fe32.top/bangumis/">我的追番</a></li><li><a target="_blank" rel="noopener" href="https://fe32.top/specialEffects/">一些特效</a><a target="_blank" rel="noopener" href="https://wallhaven.cc/">精美壁纸</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">推荐友链</p><div class="ft-img-group"><div class="img-group-item"><a target="_blank" rel="noopener" href="https://index.anheyu.com/" title="安和鱼"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img02.anheyu.com/adminuploads/1/2022/09/15/63232b7d91d22.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://fe32.top/" title="唐志远の博客"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://bu.dusays.com/2022/05/02/626f92e193879.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.zhheo.com/" title="张洪Heo"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/guli-heo/img/avatar2.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://akilar.top/" title="Akilarの糖果屋"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/akilar-candyassets/image/siteicon/favicon.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.leonus.cn/" title="Leonus"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://q1.qlogo.cn/g?b=qq&amp;nk=990320751&amp;s=5" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.yyyzyyyz.cn/" title="yyyz"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://www.yyyzyyyz.cn/butterflyimg/img/avatar.png" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://blog.eurkon.com/" title="Eurkon"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://npm.elemecdn.com/eurkon-cdn/hexo/images/user/avatar.jpg" alt=""/></a></div><div class="img-group-item"><a target="_blank" rel="noopener" href="https://www.startly.cn/" title="Cartafi"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://startly.s3.bitiful.net/footer/footer-pug/cartafi.webp" alt=""/></a></div></div></div></div><div class="copyright">&copy;2023 - 2024  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Zhenghong Chen</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v6.3.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Frame-Hexo-blue.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v4.3.1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Theme-Butterfly-6513df.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用多线部署，主线路托管于Vercel"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/Hosted-Vercel-brightgreen.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.netdun.net/" style="margin-inline:5px" title="本站使用网盾星球提供CDN加速与防护"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://sourcebucket.s3.ladydaily.com/badge/CDN-网盾星球-fff2cc.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本网站源码由Github提供存储仓库"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src=" https://sourcebucket.s3.ladydaily.com/badge/Source-Github-d021d6.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">2</button><a class="icon-V hidden" onclick="switchNightMode()" title="Switch Between Light And Dark Mode"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"><span id="percent">0<span>%</span></span></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>关于博客</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>美化设置</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>切换全屏</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>打印页面</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.macrochen.top/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.macrochen.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.textContent = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async src="/js/title.js"></script><script src="/js/sun_moon.js" async></script><script type="text/javascript" src="https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js"></script><script type="text/javascript" src="/js/rightmenu.js"></script><script defer src="/js/runtime.js"></script><script defer data-pjax src="/js/readPercent.js"></script><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async data-pjax src="/js/txmap.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="255,255,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>